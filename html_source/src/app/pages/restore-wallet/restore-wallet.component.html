<main appAutofocus aria-describedby="restore-wallet-description" class="page-container" tabindex="0">
    <p class="sr-only" id="restore-wallet-description">
        {{ 'ACCESSIBILITY.RESTORE_WALLET.DESCRIPTIONS.DESCRIPTION1' | translate }}
    </p>

    <section class="toolbar mb-2">
        <div class="left">
            <app-back-button></app-back-button>
            <h1 aria-live="assertive" class="ml-2">{{ 'BREADCRUMBS.ADD_WALLET' | translate }}</h1>
        </div>
        <div class="right"></div>
    </section>

    <section class="page-content">
        <app-breadcrumbs [items]="breadcrumbItems" class="mb-2"></app-breadcrumbs>

        <div class="scrolled-content">
            <form (ngSubmit)="restore()" [formGroup]="form" class="form" role="form">
                <!-- Name -->
                <fieldset class="form__field fixed">
                    <label for="name">{{ 'RESTORE_WALLET.LABEL_NAME' | translate }}</label>
                    <input
                        (contextmenu)="variablesService.onContextMenu($event)"
                        [attr.aria-describedby]="'name-error'"
                        [placeholder]="'PLACEHOLDERS.WALLET_NAME_PLACEHOLDER' | translate"
                        class="form__field--input"
                        formControlName="name"
                        id="name"
                        type="text"
                    />

                    <div *ngIf="form.controls.name | isVisibleControlError" aria-live="assertive" class="error"
                         id="name-error">
                        <ng-container *ngIf="form.controls.name.hasError('duplicate'); else nameMaxLengthErrorTemplate">
                            {{ 'RESTORE_WALLET.FORM_ERRORS.NAME_DUPLICATE' | translate }}
                        </ng-container>
                        <ng-template #nameMaxLengthErrorTemplate>
                            <ng-container *ngIf="form.controls.name.hasError('maxlength'); else nameRequiredErrorTemplate">
                                {{ 'RESTORE_WALLET.FORM_ERRORS.MAX_LENGTH' | translate }}
                            </ng-container>
                        </ng-template>
                        <ng-template #nameRequiredErrorTemplate>
                            <ng-container *ngIf="form.controls.name.hasError('required')">
                                {{ 'RESTORE_WALLET.FORM_ERRORS.NAME_REQUIRED' | translate }}
                            </ng-container>
                        </ng-template>
                    </div>
                </fieldset>

                <!-- Password -->
                <fieldset class="form__field">
                    <label for="password">{{ 'RESTORE_WALLET.PASS' | translate }}</label>
                    <input
                        (contextmenu)="variablesService.onContextMenuPasteSelect($event)"
                        [attr.aria-describedby]="'password-error'"
                        [placeholder]="'PLACEHOLDERS.WALLET_PASSWORD_PLACEHOLDER' | translate"
                        class="form__field--input"
                        formControlName="password"
                        id="password"
                        type="password"
                    />
                    <div *ngIf="form.controls.password | isVisibleControlError" aria-live="assertive" class="error"
                         id="password-error">
                        <ng-container *ngIf="form.controls.password.hasError('pattern')">
                            {{ 'ERRORS.REGEXP_INVALID_PASSWORD' | translate }}
                        </ng-container>
                    </div>
                </fieldset>

                <!-- Confirm Password -->
                <fieldset class="form__field fixed">
                    <label for="confirm">{{ 'RESTORE_WALLET.CONFIRM' | translate }}</label>
                    <input
                        (contextmenu)="variablesService.onContextMenuPasteSelect($event)"
                        [attr.aria-describedby]="'confirm-error'"
                        [placeholder]="'PLACEHOLDERS.CONFIRM_WALLET_PASSWORD_PLACEHOLDER' | translate"
                        class="form__field--input"
                        formControlName="confirm"
                        id="confirm"
                        type="password"
                    />
                    <div *ngIf="form.controls.confirm | isVisibleControlError" aria-live="assertive" class="error" id="confirm-error">
                        <ng-container *ngIf="form.controls.confirm.hasError('mismatch')">
                        {{ 'RESTORE_WALLET.FORM_ERRORS.CONFIRM_NOT_MATCH' | translate }}
                        </ng-container>
                    </div>
                </fieldset>

                <!-- Seed phrase -->
                <fieldset class="form__field fixed">
                    <label for="seed-phrase">{{ 'RESTORE_WALLET.LABEL_PHRASE_KEY' | translate }}</label>
                    <input
                        (contextmenu)="variablesService.onContextMenu($event)"
                        (paste)="handlePaste($event)"
                        [attr.aria-describedby]="'seed-phrase-error'"
                        [placeholder]="'PLACEHOLDERS.SEED_PHRASE_PLACEHOLDER' | translate"
                        class="form__field--input"
                        formControlName="seedPhrase"
                        id="seed-phrase"
                        type="text"
                    />
                    <div
                        *ngIf="form.controls.seedPhrase | isVisibleControlError"
                        aria-live="assertive"
                        class="error"
                        id="seed-phrase-error"
                    >
                        <div
                            *ngIf="form.controls.seedPhrase.hasError('required'); else errorSyntaxIncorrectTemplate"
                        >
                            {{ 'ERRORS.REQUIRED' | translate }}
                        </div>

                        <ng-template #errorSyntaxIncorrectTemplate>
                            <div *ngIf="form.controls.seedPhrase.hasError('syntax_incorrect')">
                                {{ 'RESTORE_WALLET.FORM_ERRORS.SEED_PHRASE_IS_NO_VALID' | translate }}
                            </div>
                        </ng-template>
                    </div>
                </fieldset>

                <!-- Seed password -->
                <fieldset *ngIf="seedPhraseInfo && seedPhraseInfo.syntax_correct && seedPhraseInfo.require_password"
                          class="form__field fixed">
                    <label for="seed-password">{{ 'RESTORE_WALLET.SEED_PASSWORD' | translate }}</label>
                    <input
                        [attr.aria-describedby]="'seed-password-error'"
                        [placeholder]="'PLACEHOLDERS.SEED_PHRASE_PLACEHOLDER' | translate"
                        class="form__field--input"
                        formControlName="seedPassword"
                        id="seed-password"
                        type="password"
                    />
                    <div
                        *ngIf="form.controls.seedPassword | isVisibleControlError"
                        aria-live="assertive"
                        class="error"
                        id="seed-password-error"
                    >
                        <span>{{ 'RESTORE_WALLET.FORM_ERRORS.INCORRECT_PASSWORD' | translate }}</span>
                    </div>

                    <div *ngIf="seedPhraseInfo.hash_sum_matched" aria-live="assertive" class="success">
                        <span>{{ 'RESTORE_WALLET.OK' | translate }}</span>
                    </div>
                </fieldset>

                <button (click)="selectLocation()" [disabled]="isDisableSelectLocation" class="outline big w-100 mb-2"
                        type="button">
                    {{ (selectedLocationWalletName ?? 'RESTORE_WALLET.BUTTON_SELECT') | translate }}
                </button>

                <button [disabled]="isDisabledCreatedWallet" class="primary big w-100 mb-2" type="submit">
                    {{ 'RESTORE_WALLET.BUTTON_CREATE' | translate }}
                </button>
            </form>
        </div>
    </section>
</main>
