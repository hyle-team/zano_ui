<fieldset class="form__field">
    <label for="address">
        {{ label | translate }}
        <span class="color-red">*</span>
    </label>

    <input
        (blur)="updateErrorMessage()"
        (contextmenu)="handlerContextmenu($event)"
        (paste)="handlerPaste($event)"
        [formControl]="form.controls.address"
        [lowerCaseDisabled]="lowerCaseDisabled"
        [matAutocomplete]="matAutocompleteRef"
        [placeholder]="placeholder | translate"
        aria-describedby="address-error wrap-service-is-inactive"
        class="form__field--input"
        id="address"
        lowerCase
        matAutocompletePosition="auto"
        type="text"
    />

    <mat-autocomplete #matAutocompleteRef="matAutocomplete" (opened)="openAutocomplete()"
                      class="zano-autocomplete-panel">
        <ng-container *ngIf="!variablesService.is_remote_node">
            <!--Loading-->
            <mat-option *ngIf="loading" disabled>
                <zano-loader class="mx-auto" style="display: block; width: fit-content"></zano-loader>
            </mat-option>

            <!--No alias found-->
            <mat-option class="placeholder" *ngIf="isShowHintNoAliasFound"
                        disabled>
                <div class="pl-1"> {{ 'COMMON.NO_ALIAS_FOUND' | translate }} </div>
            </mat-option>

            <!--Enter 1 char to search-->
            <mat-option class="placeholder" *ngIf="isShowHintEnterCharToSearch"
                        disabled>
                <div class="pl-1">
                    {{
                        'COMMON.ENTER_CHAR_TO_SEARCH' | translate
                    }} </div>
            </mat-option>
        </ng-container>

        <ng-container *ngIf="!loading">
            <cdk-virtual-scroll-viewport [itemSize]="itemSize" [style.height.px]="5 * itemSize">
                <mat-option *cdkVirtualFor="let item of items; trackBy: trackByFn" [value]="item">
                    <!-- Alias -->
                    <ng-container *ngIf="item.startsWith('@'); else itemAddressTemplate">
                        <div
                            [ngClass]="{
                                available: item.length >= 1 && item.length <= 6,
                                'pl-1': item.length > 6
                            }"
                            class="alias-container"
                        >
                            <div class="alias">
                                {{ item }}
                            </div>
                        </div>
                    </ng-container>

                    <!-- Address -->
                    <ng-template #itemAddressTemplate>
                        <span class="pl-1">{{ item | zanoShortString }}</span>
                    </ng-template>
                </mat-option>
            </cdk-virtual-scroll-viewport>
        </ng-container>
    </mat-autocomplete>

    <div *ngIf="form.controls.address | isVisibleControlError" aria-live="assertive" class="error"
         id="address-error">
        {{ errorMessages['address'] | translate }}
    </div>

    <ng-container *ngIf="form.controls.is_visible_wrap_info.value">
        <ng-container *ngIf="variablesService.is_wrap_info_service_inactive$ | async">
            <div aria-live="assertive" class="error" id="wrap-service-is-inactive">
                {{ 'ERRORS.WRAP_SERVICE_IS_INACTIVE' | translate }}
            </div>
        </ng-container>
    </ng-container>

    <ng-container *ngIf="form.controls.alias_address.value">
        <div class="info text-ellipsis">
            {{ form.controls.alias_address.value | zanoShortString }}
        </div>
    </ng-container>
</fieldset>
