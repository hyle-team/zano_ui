<div class="header">
  <div>
    <h3 tooltip="{{ variablesService.currentWallet.name }}" placement="bottom-left" tooltipClass="table-tooltip"
      [delay]="500" [showWhenNoOverflow]="false">{{variablesService.currentWallet.name}}</h3>
    <div *ngIf="!variablesService.currentWallet.is_auditable">
      <button [routerLink]="['/assign-alias']"
        *ngIf="!variablesService.currentWallet.alias.hasOwnProperty('name') && variablesService.currentWallet.loaded && variablesService.daemon_state === 2 && variablesService.currentWallet.alias_available">
        <i class="icon account"></i>
        <span>{{ 'WALLET.REGISTER_ALIAS' | translate }}</span>
      </button>
      <div class="alias"
        *ngIf="variablesService.currentWallet.alias.hasOwnProperty('name') && variablesService.currentWallet.loaded && variablesService.daemon_state === 2">
        <span>{{variablesService.currentWallet.alias['name']}}</span>
        <ng-container *ngIf="variablesService.currentWallet.alias_available">
          <i class="icon edit" [routerLink]="['/edit-alias']" tooltip="{{ 'WALLET.TOOLTIPS.EDIT_ALIAS' | translate }}"
            placement="bottom-right" tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500"></i>
          <i class="icon transfer" [routerLink]="['/transfer-alias']"
            tooltip="{{ 'WALLET.TOOLTIPS.TRANSFER_ALIAS' | translate }}" placement="right"
            tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500"></i>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="settings-block">
    <button [disabled]="settingsButtonDisabled" (click)="openDropdown = !openDropdown">
      <i class="icon details" id="wallet-dropdown-button"></i>
    </button>
    <div *ngIf="openDropdown" class="settings-dropdown">
      <button [routerLink]="['/details']" routerLinkActive="active"
        tooltip="{{ 'WALLET.TOOLTIPS.SETTINGS' | translate }}" placement="left"
        tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500"
        [disabled]="settingsButtonDisabled">
        <i class="icon wallet-settings"></i><span>{{ 'WALLET_DETAILS.WALLET_OPTIONS' | translate }}</span>
      </button>
      <button tooltip="{{ 'EXPORT_HISTORY.TOOLTIP' | translate }}" placement="left"
        tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500"
        (click)="exportHistoryDialogVisible = !exportHistoryDialogVisible"
        [disabled]="variablesService.currentWallet.history.length <= 0">
        <i class="icon export-history"></i><span>{{ 'EXPORT_HISTORY.EXPORT_BUTTON' | translate }}</span>
      </button>
      <button type="button" (click)="showConfirmDialog(variablesService.currentWallet.wallet_id)"
        tooltip="{{ 'WALLET.TOOLTIPS.CLOSE' | translate }}" placement="top-left"
        tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500">
        <i class="icon close-wallet"></i><span>{{ 'WALLET_DETAILS.BUTTON_REMOVE' | translate }}</span>
      </button>
    </div>
  </div>
</div>
<div class="address">
  <span>{{variablesService.currentWallet.address}}</span>
  <i class="icon" [class.copy]="!copyAnimation" [class.copied]="copyAnimation" (click)="copyAddress()"></i>
</div>

<div class="balance">
  <span [tooltip]="getTooltip()" [placement]="'bottom'" [tooltipClass]="'balance-tooltip'" [delay]="150" [timeout]="0"
    (onHide)="onHideTooltip()">{{variablesService.currentWallet.balance | intToMoney : '3'}}
    {{variablesService.defaultCurrency}}</span>
  <span>${{variablesService.currentWallet.getMoneyEquivalent(variablesService.moneyEquivalent) | intToMoney | number :
    '1.2-2'}}</span>
  <span class="price-percent">+4.6%</span>
</div>
<div class="tabs">
  <div class="tabs-header">
    <ng-container *ngFor="let tab of tabs; let index = index">
      <div class="tab" [class.active]="tab.active"
        [ngClass]="{ 'hide': ((tab.link === '/send' || tab.link === '/contracts') && variablesService.currentWallet.is_watch_only && variablesService.currentWallet.is_auditable) }"
        [class.disabled]="((tab.link === '/send' || tab.link === '/contracts' || tab.link === '/staking') && (variablesService.daemon_state !== 2 || !variablesService.currentWallet.loaded))
                || ((tab.link === '/send' || tab.link === '/contracts') && variablesService.currentWallet.is_watch_only && variablesService.currentWallet.is_auditable)"
        (click)="changeTab(index)" (mouseover)="itemHovered(index, true)" (mouseleave)="itemHovered(index, false)">
        <i class="icon" [ngClass]="tab.icon" [class.hovered]="tab.itemHovered"></i>
        <span>{{ tab.title | translate }}</span>
        <span class="indicator" *ngIf="tab.indicator">{{variablesService.currentWallet.new_contracts}}</span>
      </div>
    </ng-container>
  </div>
  <div #scrolledContent class="tabs-content scrolled-content">
    <router-outlet></router-outlet>
  </div>
  <div *ngIf="activeTab === 'history'" class="pagination-wrapper">
    <div class="pagination">
      <div>
        <button [ngClass]="{'disabled': sync_started || wallet}"
          [disabled]="variablesService.currentWallet.currentPage === 1 || sync_started || wallet"
          (click)="setPage(variablesService.currentWallet.currentPage - 1)">
          <svg class="icon" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8.63281 16.3281C12.9922 16.3281 16.6016 12.7109 16.6016 8.35938C16.6016 4 12.9844 0.390625 8.625 0.390625C4.27344 0.390625 0.664062 4 0.664062 8.35938C0.664062 12.7109 4.28125 16.3281 8.63281 16.3281ZM4.49219 8.35156C4.49219 8.17188 4.55469 8.04688 4.71875 7.88281L7.4375 5.14844C7.54688 5.03906 7.6875 4.98438 7.85938 4.98438C8.19531 4.98438 8.44531 5.23438 8.44531 5.57031C8.44531 5.74219 8.36719 5.89062 8.26562 6.00781L7.26562 7L6.29688 7.8125L8 7.74219H12.1797C12.5312 7.74219 12.7891 7.99219 12.7891 8.35156C12.7891 8.70312 12.5391 8.95312 12.1797 8.95312H8L6.28906 8.89062L7.26562 9.70312L8.26562 10.6953C8.375 10.8047 8.44531 10.9531 8.44531 11.125C8.44531 11.4609 8.19531 11.7188 7.85938 11.7188C7.6875 11.7188 7.54688 11.6562 7.4375 11.5469L4.71875 8.82031C4.57031 8.67188 4.49219 8.53125 4.49219 8.35156Z"
              fill="#FDFEFF" fill-opacity="0.3" />
          </svg>
        </button>

        <ng-container *ngIf="!mining">
          <button [disabled]="sync_started || wallet" *ngFor="let page of variablesService.currentWallet.pages"
            [ngClass]="{ 'active': variablesService.currentWallet.currentPage === page,'disabled': sync_started || wallet }"
            (click)="setPage(page)">{{page}}</button>
        </ng-container>

        <ng-container *ngIf="mining">
          <button
            [ngClass]="{ 'active': variablesService.currentWallet.currentPage, 'disabled': sync_started || wallet}"
            [disabled]="stop_paginate || sync_started || wallet"
            (click)="setPage(variablesService.currentWallet.currentPage)">
            {{variablesService.currentWallet.currentPage}}
          </button>
        </ng-container>

        <button [disabled]="stop_paginate || sync_started || wallet" [ngClass]="{'disabled': sync_started || wallet}"
          (click)="setPage(variablesService.currentWallet.currentPage + 1)">
          <svg class="icon" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8.63281 16.3281C12.9922 16.3281 16.6016 12.7109 16.6016 8.35938C16.6016 4 12.9844 0.390625 8.625 0.390625C4.27344 0.390625 0.664062 4 0.664062 8.35938C0.664062 12.7109 4.28125 16.3281 8.63281 16.3281ZM12.7656 8.35156C12.7656 8.53125 12.6953 8.67188 12.5391 8.82031L9.82031 11.5469C9.71094 11.6562 9.57031 11.7188 9.39844 11.7188C9.0625 11.7188 8.8125 11.4609 8.8125 11.125C8.8125 10.9531 8.88281 10.8047 8.99219 10.6953L9.99219 9.70312L10.9688 8.89062L9.26562 8.95312H5.07812C4.72656 8.95312 4.46875 8.70312 4.46875 8.35156C4.46875 7.99219 4.72656 7.74219 5.07812 7.74219H9.26562L10.9688 7.8125L9.99219 7L8.99219 6.00781C8.89062 5.89062 8.8125 5.74219 8.8125 5.57031C8.8125 5.23438 9.0625 4.98438 9.39844 4.98438C9.57031 4.98438 9.71094 5.03906 9.82031 5.14844L12.5391 7.88281C12.7031 8.04688 12.7656 8.17188 12.7656 8.35156Z"
              fill="#FDFEFF" fill-opacity="0.3" />
          </svg>
        </button>

      </div>
      <div class="mining-transaction-switch">
        <span class="switch-text">Hide mining transactions</span>
        <div class="switch" [ngClass]="{'disabled': sync_started || wallet}"
          (click)="toggleMiningTransactions(); $event.stopPropagation()" [class.on]="mining" [class.off]="!mining">
          <span class="circle"></span>
        </div>
      </div>
    </div>
  </div>
</div>
<app-confirm-modal *ngIf="delWalletDialogVisible" [title]=" 'WALLET.CONFIRM.TITLE' | translate "
  [message]=" 'WALLET.CONFIRM.MESSAGE' | translate " (confirmed)="confirmed($event)"></app-confirm-modal>
<app-export-history-modal [currentWalletId]="variablesService.currentWallet.wallet_id"
  *ngIf="exportHistoryDialogVisible" (closeExportModal)="closeExportModal($event)">
</app-export-history-modal>
